var distance=0,todaydate=new Date,monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",],timeListArr=["1:00 AM","1:30 AM","2:00 AM","2:30 AM","3 AM","3:30 AM","4:00 AM","4:30 AM","5:00 AM","5:30 AM","6:00 AM","6:30 AM","7:00 AM","7:30 AM","8:00 AM","8:30 AM","9:00 AM","9:30 AM","10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","1:00 PM","1:30 PM","2:00 PM","2:30 PM","3:00 PM","3:30 PM","4:00 PM","4:30 PM","5:00 PM","5:30 PM","6:00 PM","6:30 PM","7:00 PM","7:30 PM","8:00 PM","8:30 PM","9:00 PM","9:30 PM","10:00 PM","10:30 PM","11:00 PM","11:30 PM","12:00 AM","12:30 AM",],tmonth=todaydate.getMonth(),tday=todaydate.getDate(),tyear=todaydate.getFullYear(),tdate=((""+tday).length<2?"0":"")+tday+"-"+monthNames[tmonth]+"-"+tyear,futuredate=new Date;futuredate.setDate(futuredate.getDate()+1);var fmonth=futuredate.getMonth(),fday=futuredate.getDate(),fyear=futuredate.getFullYear(),fdate=((""+fday).length<2?"0":"")+fday+"-"+monthNames[fmonth]+"-"+fyear,busDefdt=new Date;busDefdt.setDate(busDefdt.getDate()+1);var bmonth=busDefdt.getMonth(),bday=busDefdt.getDate(),byear=busDefdt.getFullYear();busDefdt=((""+bday).length<2?"0":"")+bday+"-"+monthNames[bmonth]+"-"+byear;var cityObj=[],redirectUrl="/cabdata.php",cityUrl="/json/cities.json",outObj={ostartdesti:{lat:0,long:0},oenddesti:{lat:0,long:0}},busObj={busstartdesti:{lat:0,long:0},busenddesti:{lat:0,long:0}},contactNo=null,defaultNumber="+919702747577";function setTimeDropDown(t,e,a=!1){$(t).empty();var n=!0,o="";let i=new Date($(e).val());a&&i.setDate(i.getDate()+1);var r=i.getMonth(),s=i.getDate(),d=i.getFullYear(),c=((""+s).length<2?"0":"")+s+"-"+monthNames[r]+"-"+d;for(let l=0;l<timeListArr.length;l++){let u=new Date(c+", "+timeListArr[l]),p=new Date;var h=(u.getTime()-p.getTime())/1e3;Math.floor(h/=7200)>0&&($(t).append($("<option>",{value:timeListArr[l],text:timeListArr[l]})),n&&(n=!1,o=timeListArr[l]))}n&&setTimeDropDown(t,e,!0),$(t).val(o),$(t).attr("required","true")}function initForm(){$("#lodate").datepicker("setDate",new Date(tdate)),$("#ostartdate").datepicker("setDate",new Date(tdate)),$("#oenddate").datepicker("setDate",new Date(tdate)),$("#busstartdate").datepicker("setDate",new Date(busDefdt)),$("#busenddate").datepicker("setDate",new Date(busDefdt));var t=$("meta[property=origin-city]").attr("content");$("#ostartdesti").val(t),$("#lostartdesti").val(t),$("#busstartdesti").val(t);var e=$("meta[property=destination-city]").attr("content");$("#oenddesti").val(e),$("#busenddesti").val(e),(contactNo=$("meta[property=contact-number]").attr("content"))?($("#contact_number").text(contactNo),contactNo=(contactNo=contactNo.split(" ").filter(t=>t).join("")).split("-").filter(t=>t).join(""),$("#contact_number").attr("href","tel:"+contactNo)):contactNo=defaultNumber}function getLocalTrip(t){tripFlg=t;var e=$("#lostartdesti").val();return null!=e&&""!=e.trim()&&""!=$("#lodate").val()?getTripData():alert("Please Fill Required Detials!"),!1}function getOutStationTrip(t){tripFlg=t;var e=$("#oenddesti").val();return null!=$("#ostartdesti").val()&&null!=e&&""!=$("#ostartdate").val()&&""!=$("#oenddate").val()?getTripData():alert("Please Fill Required Details!"),!1}function getLuxBusTrip(t){tripFlg=t;var e=$("#busenddesti").val();return null!=$("#busstartdesti").val()&&null!=e&&""!=$("#busstartdate").val()&&""!=$("#busenddate").val()?getTripData():alert("Please Fill Required Details!"),!1}function getTripData(){switch($("#loading").show(),tripFlg){case 1:setLocalData(tripFlg,null,null);break;case 2:$("#oenddesti").val(),getLatLongStart(tripFlg,"ostartdesti","oenddesti");break;case 3:$("#busenddesti").val(),getLatLongStart(tripFlg,"busstartdesti","busenddesti")}}function getLatLongStart(t,e,a){let n={q:$("#"+e).val(),format:"json"},o=jQuery.param(n),i="https://nominatim.openstreetmap.org/search";i=o?i.concat("?").concat(o):i,$.ajax({type:"GET",url:i,success:function(n){n&&n.length>0?(console.log("User found...",n),2===t?(outObj[e].lat=n[0].lat,outObj[e].long=n[0].lon):(busObj[e].lat=n[0].lat,busObj[e].long=n[0].lon),getLatLongEnd(t,e,a)):alert("No Route Found!")}})}function getLatLongEnd(t,e,a){let n={q:$("#"+a).val(),format:"json"},o=jQuery.param(n),i="https://nominatim.openstreetmap.org/search";i=o?i.concat("?").concat(o):i,$.ajax({type:"GET",url:i,success:function(n){n&&n.length>0?(console.log("User found...",n),2===t?(outObj[a].lat=n[0].lat,outObj[a].long=n[0].lon):(busObj[a].lat=n[0].lat,busObj[a].long=n[0].lon),getDistance(e,a,t)):alert("No Route Found!")}})}function getDistance(t,e,a){let n=jQuery.param({overview:!1,geometries:"polyline",steps:!1}),o="https://routing.openstreetmap.de/routed-car/route/v1/driving/";o=2===a?(o=o.concat(outObj[t].long).concat(",").concat(outObj[t].lat)).concat(";").concat(outObj[e].long).concat(",").concat(outObj[e].lat):(o=o.concat(busObj[t].long).concat(",").concat(busObj[t].lat)).concat(";").concat(busObj[e].long).concat(",").concat(busObj[e].lat),o=n?o.concat("?").concat(n):o,$.ajax({type:"GET",url:o,success:function(t){if(t&&"ok"===t.code.toLowerCase().trim()){let e=(Number(t.routes[0].distance)/1e3).toFixed()+" km",n=secondsToHms(t.routes[0].duration);console.log("User found...",t),setLocalData(a,e,n)}else alert("Route not found...")}})}function secondsToHms(t){var e=Math.floor((t=Number(t))/3600),a=Math.floor(t%3600/60);return(e>0?e+(1==e?" hour, ":" hours, "):"")+(a>0?a+(1==a?" minute, ":" minutes, "):"")}function setLocalData(t,e,a){let n=null,o={};switch(t){case 1:var i=$("#lostartdesti").val(),r=cityObj.filter(function(t){return i.toLowerCase().trim()==t.cityname.toLowerCase().trim()});o={hcdistance:0,hcduration:0,hcstartdesti:i,hcenddesti:0,hcdays:0,hcdate:$("#lodate").val(),hctripFlg:t,hcrndtrip:$("#lorndtrip").val(),hcpickuptime:$("#lopickuptime").val(),hccityid:r[0].cityid},n=jQuery.param(o);break;case 2:var s=$("#ostartdate").datepicker("getDate"),d=$("#oenddate").datepicker("getDate");days=(d-s)/864e5;var r=cityObj.filter(function(t){return $("#ostartdesti").val().toLowerCase().trim()==t.cityname.toLowerCase().trim()});o={hcdistance:e,hcduration:a,hcstartdesti:$("#ostartdesti").val(),hcenddesti:$("#oenddesti").val(),hcdate:$("#ostartdate").val(),hcdate2:$("#oenddate").val(),hcdays:Math.round(days)+1,hctripFlg:t,hcrndtrip:1,hcpickuptime:$("#opickuptime").val(),hccityid:r[0].cityid},n=jQuery.param(o);break;case 3:var s=$("#busstartdate").datepicker("getDate"),d=$("#busenddate").datepicker("getDate");days=(d-s)/864e5;var r=cityObj.filter(function(t){return $("#busstartdesti").val().toLowerCase().trim()==t.cityname.toLowerCase().trim()});o={hcdistance:e,hcduration:a,hcstartdesti:$("#busstartdesti").val(),hcenddesti:$("#busenddesti").val(),hcdate:$("#busstartdate").val(),hcdate2:$("#busenddate").val(),hcdays:Math.round(days)+1,hctripFlg:t,hcrndtrip:1,hcpickuptime:$("#buspickuptime").val(),hccityid:r[0].cityid},n=jQuery.param(o)}redirectUrl=n?redirectUrl.concat("?").concat(n):redirectUrl,location.href=location.origin.concat(redirectUrl)}function getProtocol(){"https:"!=location.protocol&&(location.href="https:"+window.location.href.substring(window.location.protocol.length))}function autocomplete(t,e,a=!0){var n;function o(t){if(!t)return!1;(function t(e){for(var a=0;a<e.length;a++)e[a].classList.remove("autocomplete-active")})(t),n>=t.length&&(n=0),n<0&&(n=t.length-1),t[n].classList.add("autocomplete-active")}function i(e){for(var a=document.getElementsByClassName("autocomplete-items"),n=0;n<a.length;n++)e!=a[n]&&e!=t&&a[n].parentNode.removeChild(a[n])}t&&t.addEventListener("input",function(o){var r,s,d,c=this.value;if(i(),n=-1,c.length>0){(r=document.createElement("DIV")).setAttribute("id",this.id+"autocomplete-list"),r.setAttribute("class","autocomplete-items"),this.parentNode.appendChild(r);var l=0;for(d=0;d<e.length;d++)if(e[d].replace(/,/g,""),e[d].toUpperCase().includes(c.toUpperCase())){if(s=document.createElement("DIV"),a){var u=e[d].trim().split(","),p=u.shift(),h=(u.length>0?"<span class='grayblodspan'>"+p+",</span> ":p+",")+u.join(",");s.innerHTML="<span class='grayspan'>"+h+"</span>"}else s.innerHTML="<span class='grayblodspan'>"+e[d].substr(0,c.length)+"</span>",-1!=e[d].substr(c.length).indexOf(",")?s.innerHTML+=e[d].substr(c.length).split(/,(.+)/)[0]+"<span class='grayspan'>"+e[d].substr(c.length).split(/,(.+)/)[1]+"</span>":s.innerHTML+=e[d].substr(c.length);s.innerHTML+="<input type='hidden' value='"+e[d]+"'>",s.addEventListener("click",function(e){t.value=this.getElementsByTagName("input")[0].value,i()}),r.appendChild(s),l++}if(l<1&&a)for((s=document.createElement("DIV")).innerHTML="<strong class='onbelowcity'>We provide service only in below cities</strong>",r.appendChild(s),d=0;d<e.length;d++)(s=document.createElement("DIV")).innerHTML="<span class='grayblodspan'>"+e[d]+"</span>",s.innerHTML+="<input type='hidden' value='"+e[d]+"'>",s.addEventListener("click",function(e){t.value=this.getElementsByTagName("input")[0].value,i()}),r.appendChild(s)}}),t&&t.addEventListener("keydown",function(t){var e=document.getElementById(this.id+"autocomplete-list");e&&(e=e.getElementsByTagName("div")),40==t.keyCode?(n++,o(e)):38==t.keyCode?(n--,o(e)):13==t.keyCode&&(t.preventDefault(),n>-1&&e&&e[n].click())}),document.addEventListener("click",function(t){""!=$(t.target).text()&&i(t.target)})}function pickuplistall(){$.ajax({url:"https://www.hirecab.net/api/pickuppoint.php",success:function(t){var e=JSON.parse(t);cityObj=e.cityobj,autocomplete(document.getElementById("lostartdesti"),e.cityname),autocomplete(document.getElementById("ostartdesti"),e.cityname),autocomplete(document.getElementById("busstartdesti"),e.cityname)},error:function(t){}})}function citylist(){$.ajax({url:cityUrl,success:function(t){let e=[];t.cities.forEach(t=>{let a=t.name.concat(", ").concat(t.state).concat(", ").concat(t.country);e.push(a)}),autocomplete(document.getElementById("oenddesti"),e,!1),autocomplete(document.getElementById("busenddesti"),e,!1)},error:function(t){}})}function pickuplistoutstn(){$.ajax({url:"https://www.hirecab.net/api/pickuppoint.php",success:function(t){$("#oenddestilistdiv").hide(),$("#oenddestidiv").show(),$("#oenddestilist").prop("required",!1),$("#oenddesti").prop("required",!0);var e=JSON.parse(t);autocomplete(document.getElementById("ostartdesti"),e.cityname),$("#loading").hide()},error:function(t){}})}function capitalize_Words(t){return t.replace(/\w\S*/g,function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})}function onewaylist(){$.ajax({url:"https://www.hirecab.net/api/onewaypickuplocation.php",success:function(t){$("#oenddestilistdiv").show(),$("#oenddestidiv").hide(),$("#oenddesti").prop("required",!1),$("#oenddestilist").prop("required",!0),autocomplete(document.getElementById("ostartdesti"),JSON.parse(t)),onewaydestilocation()},error:function(t){}})}function onewaydestilocation(){$.ajax({url:"https://www.hirecab.net/api/onewaydestilocation.php",success:function(t){autocomplete(document.getElementById("oenddestilist"),JSON.parse(t)),$("#loading").hide()},error:function(t){}})}function bookCab(t,e,a,n,o,i){document.cookie="hcdistance=0;path=/",document.cookie="hcduration=0;path=/",document.cookie="hcstartdesti="+t+";path=/",document.cookie="hcenddesti="+e+";path=/",document.cookie="hcdays=0;path=/",document.cookie="hcdate=0;path=/",document.cookie="hctripFlg="+a+";path=/",document.cookie="hcfixedprice="+n+";path=/",document.cookie="hccarimage="+o+";path=/",document.cookie="hccarname="+i+";path=/",location.href="https://www.hirecab.net/booking.php"}$(document).ready(function(){getProtocol(),$("#lodate").datepicker({format:"dd-M-yyyy",startDate:tdate,todayHighlight:!0}),$("#ostartdate").datepicker({format:"dd-M-yyyy",startDate:tdate,todayHighlight:!0}).on("change",function(){null!=$("#oenddate").datepicker("getDate")&&""!=$("#oenddate").val()&&($("#oenddate").datepicker("getDate")-$("#ostartdate").datepicker("getDate"))/864e5<0&&$("#oenddate").datepicker("setDate",new Date($("#ostartdate").val())),$("#oenddate").datepicker("setStartDate",new Date($("#ostartdate").val()))}),$("#oenddate").datepicker({format:"dd-M-yyyy",startDate:tdate,todayHighlight:!0}),$("#busstartdate").datepicker({format:"dd-M-yyyy",startDate:busDefdt,todayHighlight:!0}).on("change",function(){null!=$("#busenddate").datepicker("getDate")&&""!=$("#busenddate").val()&&(days=($("#busenddate").datepicker("getDate")-$("#busstartdate").datepicker("getDate"))/864e5)<0&&$("#busenddate").datepicker("setDate",new Date($("#busstartdate").val())),$("#busenddate").datepicker("setStartDate",new Date($("#busstartdate").val()))}),$("#busenddate").datepicker({format:"dd-M-yyyy",startDate:busDefdt,todayHighlight:!0}),$("#lodate").on("changeDate",function(t){$(this).datepicker("hide"),setTimeDropDown("#lopickuptime","#lodate")}),$("#ostartdate").on("changeDate",function(t){$(this).datepicker("hide"),setTimeDropDown("#opickuptime","#ostartdate")}),$("#oenddate").on("changeDate",function(t){$(this).datepicker("hide")}),$("#busstartdate").on("changeDate",function(t){$(this).datepicker("hide")}),$("#busenddate").on("changeDate",function(t){$(this).datepicker("hide")}),document.getElementById("loform")&&document.getElementById("loform").reset(),document.getElementById("oform")&&document.getElementById("oform").reset(),document.getElementById("busform")&&document.getElementById("busform").reset(),initForm(),$("#divinputbox").show()}),$(window).bind("pageshow",function(t){$("#loading").hide()}),pickuplistall(),citylist(),$("#orndtrip").change(function(){$("#loading").show(),0==$("#orndtrip").val()?onewaylist():pickuplistoutstn()});